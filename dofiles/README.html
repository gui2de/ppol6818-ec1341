<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simulation Study: Fixed vs. Infinite Superpopulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            line-height: 1.6;
        }
        h1, h2, h3 {
            color: #333;
        }
        table {
            border-collapse: collapse;
            width: 90%;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid #999;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
        img {
            max-width: 90%;
            margin: 20px 0;
        }
        hr {
            margin: 40px 0;
        }
    </style>
</head>
<body>

<h1>Simulation Study: Fixed vs. Infinite Superpopulation</h1>

<h2>Overview</h2>

<p>We developed a simple data generating process (DGP) where:</p>
<ul>
    <li>X ~ N(0, 1)</li>
    <li>error ~ N(0, 1)</li>
    <li>Outcome variable: Y = 1.8 * X + error</li>
</ul>

<p>This DGP is identical in both parts of the study.</p>

<hr>

<h2>Part 1: Sampling from a Fixed Population</h2>

<p>In this part, we created a fixed population of 10,000 individuals with generated X and Y. Sampling noise here comes only from taking random samples from this <strong>fixed dataset</strong>.</p>

<p>We simulated 500 regressions at sample sizes: 10, 100, 1,000, 10,000.</p>

<h3>Summary Statistics (Fixed Population)</h3>

<table>
    <tr>
        <th>Sample Size</th>
        <th>Mean Beta</th>
        <th>SEM</th>
    </tr>
    <tr><td>10</td><td>1.857</td><td>0.3513</td></tr>
    <tr><td>100</td><td>1.799</td><td>0.1013</td></tr>
    <tr><td>1,000</td><td>1.803</td><td>0.0316</td></tr>
    <tr><td>10,000</td><td>1.803</td><td>0.00998</td></tr>
</table>

<h3>Key Figure</h3>

<img src="./fig_beta_variation_emc.png" alt="Beta Variation Fixed Population">

<p>This plot shows how the beta estimates stabilize and confidence intervals narrow as the sample size increases within the fixed population.</p>

<hr>

<h2>Part 2: Sampling from an Infinite Superpopulation</h2>

<p>In this part, each simulation draws a fresh dataset, effectively from an <strong>infinite superpopulation</strong>.</p>

<p>We simulated 500 regressions at sample sizes: powers of two from 4 up to 2,097,152, plus 10, 100, 1,000, 10,000, 100,000, 1,000,000.</p>

<h3>Summary Statistics (Infinite Superpopulation)</h3>

<table>
    <tr>
        <th>Sample Size</th>
        <th>Mean Beta</th>
        <th>SEM</th>
        <th>CI Width</th>
    </tr>
    <tr><td>4</td><td>1.722</td><td>0.719</td><td>6.19</td></tr>
    <tr><td>8</td><td>1.794</td><td>0.416</td><td>2.03</td></tr>
    <tr><td>10</td><td>1.812</td><td>0.363</td><td>1.68</td></tr>
    <tr><td>100</td><td>1.797</td><td>0.101</td><td>0.40</td></tr>
    <tr><td>1,000</td><td>1.799</td><td>0.0316</td><td>0.12</td></tr>
    <tr><td>10,000</td><td>1.800</td><td>0.0100</td><td>0.039</td></tr>
    <tr><td>100,000</td><td>1.800</td><td>0.00316</td><td>0.012</td></tr>
    <tr><td>1,000,000</td><td>1.800</td><td>0.00100</td><td>0.0039</td></tr>
    <tr><td>2,097,152</td><td>1.800</td><td>0.00069</td><td>0.0027</td></tr>
</table>

<h3>Key Figure</h3>

<img src="./fig_inf_beta_ciwidth_emc.png" alt="Beta & CI Width Infinite Superpopulation">

<p>This plot shows both the mean beta estimate and the confidence interval width across increasing sample sizes.</p>

<hr>

<h2>Comparing Fixed vs. Infinite Sampling</h2>

<p>We combined the two results to directly compare <strong>standard errors</strong> as sample sizes increase.</p>

<table>
    <tr>
        <th>Type</th>
        <th>Sample Size</th>
        <th>Mean Beta</th>
        <th>SEM</th>
        <th>CI Width</th>
    </tr>
    <tr><td>Fixed</td><td>10</td><td>1.857</td><td>0.351</td><td>—</td></tr>
    <tr><td>Fixed</td><td>100</td><td>1.799</td><td>0.101</td><td>—</td></tr>
    <tr><td>Fixed</td><td>1,000</td><td>1.803</td><td>0.0316</td><td>—</td></tr>
    <tr><td>Fixed</td><td>10,000</td><td>1.803</td><td>0.00998</td><td>—</td></tr>
    <tr><td>Superpop</td><td>10</td><td>1.812</td><td>0.363</td><td>1.68</td></tr>
    <tr><td>Superpop</td><td>100</td><td>1.797</td><td>0.101</td><td>0.40</td></tr>
    <tr><td>Superpop</td><td>1,000</td><td>1.799</td><td>0.0316</td><td>0.12</td></tr>
    <tr><td>Superpop</td><td>10,000</td><td>1.800</td><td>0.0100</td><td>0.039</td></tr>
    <tr><td>Superpop</td><td>1,000,000</td><td>1.800</td><td>0.00100</td><td>0.0039</td></tr>
    <tr><td>Superpop</td><td>2,097,152</td><td>1.800</td><td>0.00069</td><td>0.0027</td></tr>
</table>

<h3>Comparison Figure</h3>

<img src="./fixed_superpop_emc.png" alt="Fixed vs. Superpop SEM">

<p>This figure illustrates the sharp drop in standard errors as sample sizes increase, with superpopulation simulations extending to far larger N.</p>

<hr>

<h2>Key Takeaways</h2>

<ul>
    <li>Increasing sample size reduces the standard error and tightens confidence intervals.</li>
    <li>The infinite superpopulation allows simulations at much larger N, showing smoother convergence to the true beta.</li>
    <li>The fixed population stabilizes estimates faster but is inherently capped in variability.</li>
    <li>For very large N, the infinite superpopulation achieves near-perfect precision.</li>
</ul>

</body>
</html>
